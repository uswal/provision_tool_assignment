USE ROLE SYSADMIN;
CREATE WAREHOUSE IF NOT EXISTS WH_dev WAREHOUSE_SIZE = 'XSMALL', INITIALLY_SUSPENDED = true;
USE ROLE SYSADMIN;
CREATE WAREHOUSE IF NOT EXISTS WH_prod WAREHOUSE_SIZE = 'SMALL', INITIALLY_SUSPENDED = true;
USE ROLE SYSADMIN;
CREATE DATABASE IF NOT EXISTS DB_DEMO_dev;
USE ROLE SYSADMIN;
CREATE DATABASE IF NOT EXISTS DB_DEMO_prod;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
CREATE ROLE IF NOT EXISTS ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_dev TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_dev TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_dev TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_dev TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT OPERATE ON WAREHOUSE WH_dev TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT MODIFY ON WAREHOUSE WH_dev TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_dev TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_dev TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_dev TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_dev TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT OPERATE ON WAREHOUSE WH_dev TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT MODIFY ON WAREHOUSE WH_dev TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_prod TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_prod TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_prod TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_prod TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT OPERATE ON WAREHOUSE WH_prod TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT MODIFY ON WAREHOUSE WH_prod TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_prod TO ROLE ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON DATABASE DB_DEMO_prod TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_prod TO ROLE ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT USAGE ON WAREHOUSE WH_prod TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT OPERATE ON WAREHOUSE WH_prod TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT MODIFY ON WAREHOUSE WH_prod TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_client_dev_RW TO USER user2_engineer;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_host_dev_RW TO USER user2_engineer;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_client_prod_RW TO USER user2_engineer;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_host_prod_RW TO USER user2_engineer;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_client_dev_RO TO USER user1_analyst;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_host_dev_RO TO USER user1_analyst;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_client_prod_RO TO USER user1_analyst;
USE ROLE SECURITYADMIN;
GRANT ROLE ROLE_host_prod_RO TO USER user1_analyst;
USE ROLE SECURITYADMIN;
ALTER USER IF EXISTS user2_engineer SET DEFAULT_ROLE = 'WS_user2_engineer, LOGIN_NAME = ''user2_engineer';
USE ROLE SECURITYADMIN;
ALTER USER IF EXISTS user1_analyst SET DEFAULT_ROLE = 'WS_user1_analyst, LOGIN_NAME = ''user1_analyst';
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.RAW_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.STAGE_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.MODEL_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.RAW_client;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.STAGE_client;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_dev.MODEL_client;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.RAW_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.STAGE_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.MODEL_host;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.RAW_client;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.STAGE_client;
USE ROLE SYSADMIN;
CREATE SCHEMA IF NOT EXISTS DB_DEMO_prod.MODEL_client;
USE ROLE SECURITYADMIN;
GRANT USAGE ON all schemas in database DB_DEMO_dev TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.RAW_host TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.STAGE_host TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.MODEL_host TO ROLE ROLE_host_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON all schemas in database DB_DEMO_dev TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.RAW_client TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.STAGE_client TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_dev.MODEL_client TO ROLE ROLE_client_dev_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON all schemas in database DB_DEMO_prod TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.RAW_host TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.STAGE_host TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.MODEL_host TO ROLE ROLE_host_prod_RW;
USE ROLE SECURITYADMIN;
GRANT USAGE ON all schemas in database DB_DEMO_prod TO ROLE ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.RAW_client TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.STAGE_client TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT ALL PRIVILEGES ON SCHEMA DB_DEMO_prod.MODEL_client TO ROLE ROLE_client_prod_RW;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.RAW_host TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.STAGE_host TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.MODEL_host TO ROLE ROLE_host_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.RAW_client TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.STAGE_client TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_dev.MODEL_client TO ROLE ROLE_client_dev_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.RAW_host TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.STAGE_host TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.MODEL_host TO ROLE ROLE_host_prod_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.RAW_client TO ROLE ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.STAGE_client TO ROLE ROLE_client_prod_RO;
USE ROLE SECURITYADMIN;
GRANT SELECT ON future tables in schema DB_DEMO_prod.MODEL_client TO ROLE ROLE_client_prod_RO;
